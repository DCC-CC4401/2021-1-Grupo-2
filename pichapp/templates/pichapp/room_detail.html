<!DOCTYPE html>
<html>
<head>
  {% load static %}
  <title> Pichangapp</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.5/css/bulma.css">
    <link rel="stylesheet" type="text/css" href="{% static 'pichapp/register.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'pichapp/mystyles.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'pichapp/room_detail.css' %}">
</head>

<body>
  {% include "pichapp/navbar.html" %}

  <div class="hero is-primary">
    <div class="hero-body">
      <h1 class="title has-text-centered is-size-2"> Pichangapp </h1>
      <div class="center-container">
        <div class="content-wrapper">
          <div class="container-button">
            <a class="button is-info is-rounded is-small" href="#"> Volver a la bÃºsqueda </a>
          </div>
          <div class="room-box">
            <div class="room-box-header">
              <h2>
                {{ room.name }}
              </h2>
              <p>
                {{ room.category.verbose_name }}
              </p>
            </div>
            <div class="room-box-info">
              <p>
                <span class="has-text-weight-bold"> NÃºmero de participantes: </span>{{ room.current_size }}
              </p>
              <p>
                <span class="has-text-weight-bold"> DirecciÃ³n: </span>{{ room.place }}
              </p>
              <p>
                <span class="has-text-weight-bold"> Fecha de encuentro: </span>{{ room.activity_datetime }}
              </p>
            </div>
            <div class="room-box-participants">
              <h3 class="has-text-weight-bold"> Participantes:</h3>
              <div class="participants-list">
                {% for p in room.participants.all %}
                  <div class="participant-info">
                    <figure class="image is-32x32">
                      <img src="{% static "pichapp/blank_profile.png" %}" class="is-rounded"/>
                    </figure>
                    <span>{{ p.username }}</span>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="container-button is-right">
            {% if in_room %}
              <form action="{% url "room_exit" room.pk %}" method="post">
                {% csrf_token %}
                <button class="button is-primary is-rounded is-light is-medium mb-2" type="submit">
                  Salir de la sala
                </button>
              </form>
            {% else %}
              {% if room.is_full %}
                <button class="button is-primary is-rounded is-light is-medium mb-2" disabled>
                  Sala llena ðŸ˜¢
                </button>
              {% else %}
                {% if is_authenticated %}
                  <form action="{% url "room_join" room.pk %}" method="post">
                    {% csrf_token %}
                    <button class="button is-primary is-rounded is-light is-medium mb-2" type="submit">
                      Entrar a la sala
                    </button>
                  </form>
                {% else %}
                  <a class="button back-to-search-button" href={% url 'login_user' %}>
                    Entrar a la sala
                  </a>
                {% endif %}
              {% endif %}
            {% endif %}

          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>